<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/WEB-INF/templates/template.xhtml">


	<ui:define name="content">


		<h:form method="post">
			<h:panelGrid columns="1" style="width: 90%">
				<p:wizard>

					<p:tab title="Movimiento de Entrada" id="movEntrada">
						<br />
						<br />

						<h:panelGrid columns="4" width="100%"
							columnClasses="rightalign,leftalign,leftalign">

							<h:outputLabel value="Almacen: " for="almacen" />
							<h:inputText id="almacen" label="Almacen" required="true"
								value="#{movEntrada.movEntrada.almacen}" >
							<f:validateLongRange minimum = "1" maximum = "1000000" />
        					 </h:inputText>		
								
							<p:commandButton value="Buscar"
								onclick="window.open('/AlmacenDepositoWEB/general/almacen.xhtml')" />

							<p:message for="almacen" />

							<h:outputLabel value="Número Actividad: " for="actividad" />
							<h:inputText id="actividad" label="Número Actividad: " required="true"
								value="#{movEntrada.movEntrada.actividad}" >
							<f:validateLongRange minimum = "0" maximum = "10000" />
        					 </h:inputText>	
							<p:commandButton value="Buscar"
								onclick="window.open('/AlmacenDepositoWEB/general/actividad.xhtml')" />
							<p:message for="actividad" />

							<h:outputLabel value="Fecha Ingreso:" for="fechaIngreso" />
							<p:calendar id="fechaIngreso"
								value="#{movEntrada.movEntrada.fechaIngreso}" showOn="button"
								navigator="true" />
							<h:outputLabel />
							<p:message for="fechaIngreso" />

							<h:outputLabel value="Código Tipo Movimiento de Origen:"
								for="tComprobante" />
							<h:inputText id="tComprobante"
								label="Código Tipo Movimiento de Origen:" required="true"
								value="#{movEntrada.movEntrada.comprobante}" >
							<f:validateLongRange minimum = "0" maximum = "10000" />
        					 </h:inputText>	
							<p:commandButton value="Buscar"
								onclick="window.open('/AlmacenDepositoWEB/general/tipoMovOrigen.xhtml')" />
							<p:message for="tComprobante" />

							<h:outputLabel value="Número de Comprobante" for="nroFactura" />
							<h:inputText id="nroFactura" label="Número de Comprobante"
								value="#{movEntrada.movEntrada.nroComprobante}" />
							<h:outputLabel />
							<p:message for="nroFactura" />

							<h:outputLabel value="Fecha Comprobante:" for="fechaMO" />
							<p:calendar id="fechaMO" value="#{movEntrada.movEntrada.fechaMO}"
								showOn="button" navigator="true" />
							<h:outputLabel />
							<p:message for="fechaMO" />

							<h:outputLabel value="Número de Solicitud" for="nroSolicitud" />
							<h:inputText id="nroSolicitud" label="Número de Solicitud"
								required="true" value="#{movEntrada.movEntrada.nroSolicitud}" >
							<f:validateLongRange minimum = "0" maximum = "1000000" />
        					 </h:inputText>	
							<h:outputLabel />
							<p:message for="nroSolicitud" />

							<h:outputLabel value="CUIT" for="cuitlegajo" />
							<h:inputText id="cuitlegajo" label="CUIT" required="true"
								value="#{movEntrada.movEntrada.cuitlegajo}" validatorMessage="CUIT: Escriba un C.U.I.T. valido. Ejemplo: 30546660210">
							<f:validateLength minimum="11" maximum="11" />
							 </h:inputText>	
							<p:commandButton value="Buscar"
								onclick="window.open('/AlmacenDepositoWEB/general/cuit-legajo.xhtml')" />
							<p:message for="cuitlegajo" />

							<h:outputLabel value="Observaciones" for="observaciones" />
							<h:inputTextarea id="observaciones" label="Observaciones"
								value="#{movEntrada.movEntrada.observaciones}" />
							<h:outputLabel />
							<p:message for="observaciones" />
						</h:panelGrid>
						<br />
						<br />
						<p:commandButton value="Cancel" action="#{movEntrada.cancelar()}"
							immediate="true" />

					</p:tab>

					<p:tab title="Detalle" id="detalle">
						<br />


						<h3>Agregar Detalle</h3>

						<h:panelGrid columns="4" width="100%"
							columnClasses="rightalign,leftalign,leftalign">


							<h:outputLabel value="Cantidad :" for="cantidad" />
							<h:inputText size="10" id="cantidad" label="Cantidad"
								required="true" value="#{movEntrada.cantidad}" />
							<h:outputLabel />
							<h:message for="cantidad" />


							<h:outputLabel value="Código Articulo :" for="codArticulo" />
							<h:inputText size="20" id="codArticulo" label="Código Articulo"
								required="true" value="#{movEntrada.codArticulo}" />
							<h:commandButton value="Buscar"
								onclick="window.open('/AlmacenDepositoWEB/general/articulo.xhtml')" />
							<h:message for="codArticulo" />


							<h:outputLabel value="Número de serie o proveedor:"
								for="nroSerie" />
							<h:inputText size="20" id="nroSerie"
								label="Número de serie o proveedor:" required="true"
								value="#{movEntrada.nroSerie}" />
							<h:outputLabel />
							<h:message for="nroSerie" />

							<h:outputLabel value="Fecha Vencimiento :" for="fechaVto" />
							<p:calendar id="fechaVto" showOn="button"
								label="Fecha Vencimiento" value="#{movEntrada.fechaVto}" />
							<h:outputLabel />
							<h:message for="fechaVto" />


							<h:outputLabel value="Ubicación :" for="ubicacion" />
							<h:inputText size="5" id="ubicacion" label="Ubicación"
								required="true" value="#{movEntrada.ubicacion}" />
							<h:outputLabel />
							<h:message for="ubicacion" />

							<h:outputLabel value="Modelo y Marca:" for="modelo" />
							<h:inputText size="5" id="modelo" label="Modelo" required="true"
								value="#{movEntrada.modelo}" />
							<h:commandButton value="Buscar"
								onclick="window.open('/AlmacenDepositoWEB/general/marca.xhtml')" />
							<h:message for="modelo" />

							<h:outputLabel value="Importe Unitario :" for="importeUnitario" />
							<h:inputText size="5" id="importeUnitario"
								label="Importe Unitario :" required="true"
								value="#{movEntrada.importeUnitario}" />
							<h:outputLabel />
							<h:message for="importeUnitario" />
							<br />

							<h:commandButton value="Agregar"
								action="#{movEntrada.addDetalle}" />

							<br />
						</h:panelGrid>
						<br />
						<hr />
						<br />

						<p:dataTable id="detalleTable" border="1" value="#{movEntrada.detallesMovEntrada}"
							var="detalle">
							<p:column>
								<f:facet name="header">Cantidad</f:facet>    				
                                           #{detalle.cantidad}
                                    </p:column>
							<p:column>
								<f:facet name="header">C. Articulo</f:facet>
                                		    #{detalle.codArticulo}
                                            
                                    </p:column>
							<p:column>
								<f:facet name="header">Nro. Serie/Proveedor</f:facet>
                                		    #{detalle.nroSerie_Proveedor}
                                            
                                    </p:column>
							<p:column>
								<f:facet name="header">Fecha Vencimiento</f:facet>
								<h:outputText value="  #{detalle.fechaVto}" id="popupButtonDate">
									<f:convertDateTime pattern="d/M/yyyy" />
								</h:outputText>

							</p:column>
							<p:column>
								<f:facet name="header">Ubicación</f:facet>
                                         #{detalle.ubicacion}
                                            
                                    </p:column>

							<p:column>
								<f:facet name="header">Modelo</f:facet>
                                        #{detalle.modelo}
                                           
                                    </p:column>

							<p:column>
								<f:facet name="header">Importe Unitario</f:facet>
                                        #{detalle.importeUnitario}
                                           
                                    </p:column>

							<p:column>
								<f:facet name="header">Eliminar</f:facet>
								<p:commandButton icon="ui-icon-close" title="remove from cart"
									action="#{movEntrada.borrarFila(detalle)}" update="detalleTable" />


							</p:column>

						</p:dataTable>



						<br />
						<br />
						<br />
						<p:commandButton value="Cancel" action="#{movEntrada.cancelar()}"
							immediate="true" />
					</p:tab>



					<p:tab title="Confirmar" id="confirmar">
						<br />
						<h:panelGrid columns="2" columnClasses="rightalign-bold,normal">

							<h:outputLabel value="Almacen: " />
							<h:outputText value="#{movEntrada.movEntrada.almacen}" />
							<h:outputLabel value="Actividad: " />
							<h:outputText value="#{movEntrada.movEntrada.actividad}" />
							<h:outputLabel value="Fecha de Ingreso: " />
							<h:outputText value="#{movEntrada.movEntrada.fechaIngreso}" />
							<h:outputLabel value="Código Tipo Movimiento de Origen: " />
							<h:outputText value="#{movEntrada.movEntrada.comprobante}" />
							<h:outputLabel value="Número de Comprobante:" />
							<h:outputText value="#{movEntrada.movEntrada.nroComprobante}" />
							<h:outputLabel value="Número de Solicitud: " />
							<h:outputText value="#{movEntrada.movEntrada.nroSolicitud}" />
							<h:outputLabel value="CUIT/LEGAJO: " />
							<h:outputText value="#{movEntrada.movEntrada.cuitlegajo}" />
							<h:outputLabel value="Observaciones: " />
							<h:outputText value="#{movEntrada.movEntrada.observaciones}" />


						</h:panelGrid>

						<br />

						<p:dataTable style="table1" border="1"
							value="#{movEntrada.detallesMovEntrada}" var="detalle">
							<p:column>
								<f:facet name="header">Cantidad</f:facet>    				
                                            #{detalle.cantidad}
                                    </p:column>
							<p:column>
								<f:facet name="header">C. Articulo</f:facet>
                                            #{detalle.codArticulo}
                                    </p:column>
							<p:column>
								<f:facet name="header">Nro. Serie/Proveedor</f:facet>
                                            #{detalle.nroSerie_Proveedor}
                                    </p:column>
							<p:column>
								<f:facet name="header">Fecha Vencimiento</f:facet>
								<h:outputText value="  #{detalle.fechaVto}" id="popupButtonDate">
									<f:convertDateTime pattern="d/M/yyyy" />
								</h:outputText>

							</p:column>
							<p:column>
								<f:facet name="header">Ubicación</f:facet>
                                            #{detalle.ubicacion}
                                    </p:column>

							<p:column>
								<f:facet name="header">Modelo</f:facet>
                                            #{detalle.modelo}
                                    </p:column>

							<p:column>
								<f:facet name="header">Importe Unitario</f:facet>
                                        #{detalle.importeUnitario}
                                           
                            </p:column>


						</p:dataTable>

						<br />
						<br />

						<p align="right">
							<p:commandButton value="Guardar"
								action="#{movEntrada.crearMovimiento}" update="msgs" >
											 
							 </p:commandButton>
						</p>
						<p:commandButton value="Volver a Indice" action="/index.xhtml"
							immediate="true" />

						<p:messages id="msgs" showDetail="true" />
						<br />
						<br />
						<p:commandButton value="Cancel" action="#{movEntrada.cancelar()}"
							immediate="true" />

					</p:tab>



				</p:wizard>

			</h:panelGrid>
			<br />
		</h:form>

	</ui:define>

</ui:composition>



</html>